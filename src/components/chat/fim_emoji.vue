<script setup lang="ts">
import {ref} from "vue";
import {useStore} from "@/stores";

const store = useStore()
const menu = ref(1)

function sendUnicodeEmoji(e: Event) {
  const obj = e.target as HTMLElement
  if (obj.tagName === "SPAN") {
    store.setChatContent(obj.innerHTML)
  }
}

function sendIconfontEmoji(e: Event) {
  const obj = e.target as HTMLElement
  if (obj.tagName === "I") {
    obj.classList.add("iconfont_emoji")
    store.setChatContent(obj.outerHTML)
  }
}

function sendPackEmoji(e: Event) {
  const obj = e.target as HTMLElement
  if (obj.tagName === "IMG") {
    obj.classList.add("pack_emoji")
    store.setChatContent(obj.outerHTML)
  }
}

</script>

<template>
  <div class="fim_emoji">
    <el-popover popper-class="fim_emoji_popover"
                placement="top" trigger="click" :width="320">
      <template #reference>
        <i title="è¡¨æƒ…" class="iconfont icon-biaoqing3"></i>
      </template>
      <template #default>
        <el-tabs tab-position="bottom" v-model="menu">
          <el-tab-pane class="classical" label="ç»å…¸è¡¨æƒ…" :name="1">
            <div class="classical_emoji_list" @click="sendIconfontEmoji">
              <i class="iconfont icon-weiqudedouding"></i>
              <i class="iconfont icon-yihuodedouding"></i>
              <i class="iconfont icon-qigugudedouding"></i>
              <i class="iconfont icon-sikaodedouding"></i>
              <i class="iconfont icon-jizhidedouding"></i>
              <i class="iconfont icon-nanshoudedouding"></i>
              <i class="iconfont icon-tianzhendedouding"></i>
              <i class="iconfont icon-yunyundedouding"></i>
              <i class="iconfont icon-xingfendedouding"></i>
              <i class="iconfont icon-sajiaodedouding"></i>
              <i class="iconfont icon-chijingdedouding"></i>
              <i class="iconfont icon-shengqidedouding"></i>
              <i class="iconfont icon-nanguodedouding"></i>
              <i class="iconfont icon-sangsangdedouding"></i>
              <i class="iconfont icon-xianqidedouding"></i>
              <i class="iconfont icon-yipiankongbaidedouding"></i>
              <i class="iconfont icon-buyiweirandedouding"></i>
              <i class="iconfont icon-kunkundedouding"></i>
              <i class="iconfont icon-kaixindedouding"></i>
            </div>
          </el-tab-pane>
          <el-tab-pane class="symbol" label="ç¬¦å·è¡¨æƒ…" :name="2">
            <div class="emoji_list" @click="sendUnicodeEmoji">
              <span title="å˜¿å˜¿">ğŸ˜€</span><span title="å˜»å˜»">ğŸ˜</span><span title="ç¬‘å“­äº†">ğŸ˜‚</span>
              <span title="å“ˆå“ˆ">ğŸ˜ƒ</span><span title="å¤§ç¬‘">ğŸ˜„</span><span title="è‹¦ç¬‘">ğŸ˜…</span>
              <span title="æ–œçœ¼ç¬‘">ğŸ˜†</span><span title="å¾®ç¬‘å¤©ä½¿">ğŸ˜‡</span><span title="æ¶é­”å¾®ç¬‘">ğŸ˜ˆ</span>
              <span title="çœ¨çœ¼">ğŸ˜‰</span><span title="ç¾æ¶©å¾®ç¬‘">ğŸ˜Š</span><span title="å¥½åƒ">ğŸ˜‹</span>
              <span title="æ¾äº†å£æ°”">ğŸ˜Œ</span><span title="èŠ±ç—´">ğŸ˜</span><span title="å¢¨é•œç¬‘è„¸">ğŸ˜</span>
              <span title="å¾—æ„">ğŸ˜</span><span title="å†·æ¼ ">ğŸ˜</span><span title="æ— è¯­">ğŸ˜‘</span>
              <span title="ä¸é«˜å…´">ğŸ˜’</span><span title="æ±—">ğŸ˜“</span><span title="æ²‰æ€">ğŸ˜”</span>
              <span title="å›°æ‰°">ğŸ˜•</span><span title="å›°æƒ‘">ğŸ˜–</span><span title="äº²äº²">ğŸ˜—</span>
              <span title="é£å»">ğŸ˜˜</span><span title="å¾®ç¬‘äº²äº²">ğŸ˜™</span><span title="ç¾æ¶©äº²äº²">ğŸ˜š</span>
              <span title="åèˆŒ">ğŸ˜›</span><span title="å•çœ¼åèˆŒ">ğŸ˜œ</span><span title="çœ¯çœ¼åèˆŒ">ğŸ˜</span>
              <span title="å¤±æœ›">ğŸ˜</span><span title="æ‹…å¿ƒ">ğŸ˜Ÿ</span><span title="ç”Ÿæ°”">ğŸ˜ </span>
              <span title="æ€’ç«ä¸­çƒ§">ğŸ˜¡</span><span title="å“­">ğŸ˜¢</span><span title="ç—›è‹¦">ğŸ˜£</span>
              <span title="å‚²æ…¢">ğŸ˜¤</span><span title="å¤±æœ›ä½†å¦‚é‡Šé‡è´Ÿ">ğŸ˜¥</span><span title="å•Š">ğŸ˜¦</span>
              <span title="æåº¦ç—›è‹¦">ğŸ˜§</span><span title="å®³æ€•">ğŸ˜¨</span><span title="ç´¯æ­»äº†">ğŸ˜©</span>
              <span title="å›°">ğŸ˜ª</span><span title="ç´¯">ğŸ˜«</span><span title="é¾‡ç‰™å’§å˜´">ğŸ˜¬</span>
              <span title="æ”¾å£°å¤§å“­">ğŸ˜­</span><span title="åƒæƒŠ">ğŸ˜®</span><span title="ç¼„é»˜">ğŸ˜¯</span>
              <span title="å†·æ±—">ğŸ˜°</span><span title="å“æ­»äº†">ğŸ˜±</span><span title="éœ‡æƒŠ">ğŸ˜²</span>
              <span title="è„¸çº¢">ğŸ˜³</span><span title="ç¡ç€äº†">ğŸ˜´</span><span title="æ™•å¤´è½¬å‘">ğŸ˜µ</span>
              <span title="æ²‰é»˜">ğŸ˜¶</span><span title="æ„Ÿå†’">ğŸ˜·</span><span title="å¾®å¾®ä¸æ»¡">ğŸ™</span>
              <span title="å‘µå‘µ">ğŸ™‚</span><span title="å€’è„¸">ğŸ™ƒ</span><span title="ç¿»ç™½çœ¼">ğŸ™„</span>
              <span title="å¾®ç¬‘çš„çŒ«">ğŸ˜¸</span><span title="ç¬‘å‡ºçœ¼æ³ªçš„çŒ«">ğŸ˜¹</span><span title="å¤§ç¬‘çš„çŒ«">ğŸ˜º</span>
              <span title="èŠ±ç—´çš„çŒ«">ğŸ˜»</span><span title="å¥¸ç¬‘çš„çŒ«">ğŸ˜¼</span><span title="äº²äº²çŒ«">ğŸ˜½</span>
              <span title="ç”Ÿæ°”çš„çŒ«">ğŸ˜¾</span><span title="å“­æ³£çš„çŒ«">ğŸ˜¿</span><span title="ç–²å€¦çš„çŒ«">ğŸ™€</span>
              <span title="ç¦æ­¢æ‰‹åŠ¿">ğŸ™…</span><span title="OKæ‰‹åŠ¿">ğŸ™†</span><span title="é èº¬">ğŸ™‡</span>
              <span title="éç¤¼å‹¿è§†">ğŸ™ˆ</span><span title="éç¤¼å‹¿å¬">ğŸ™‰</span><span title="éç¤¼å‹¿è¨€">ğŸ™Š</span>
              <span title="ä¸¾æ‰‹">ğŸ™‹</span><span title="ä¸¾åŒæ‰‹">ğŸ™Œ</span><span title="çš±çœ‰">ğŸ™</span>
              <span title="æ’…å˜´">ğŸ™</span><span title="åŒæ‰‹åˆå">ğŸ™</span>
            </div>
          </el-tab-pane>
          <el-tab-pane class="emoji_pack" label="è¡¨æƒ…åŒ…" :name="3">
            <div class="pack_emoji_list" @click="sendPackEmoji">
              <span><img src="@/assets/gif/QQå›¾ç‰‡20240420004934.gif" alt=""></span>
              <span><img src="@/assets/gif/QQå›¾ç‰‡20240420004938.gif" alt=""></span>
              <span><img src="@/assets/gif/QQå›¾ç‰‡20240420004946.gif" alt=""></span>
              <span><img src="@/assets/gif/QQå›¾ç‰‡20240420004950.gif" alt=""></span>
              <span><img src="@/assets/gif/QQå›¾ç‰‡20240420004953.gif" alt=""></span>
              <span><img src="@/assets/gif/QQå›¾ç‰‡20240420004956.gif" alt=""></span>
              <span><img src="@/assets/gif/QQå›¾ç‰‡20240420005000.gif" alt=""></span>
              <span><img src="@/assets/gif/QQå›¾ç‰‡20240420005004.gif" alt=""></span>
              <span><img src="@/assets/gif/QQå›¾ç‰‡20240420005010.gif" alt=""></span>
            </div>
          </el-tab-pane>
        </el-tabs>
      </template>
    </el-popover>
  </div>
</template>

<style lang="scss">
.fim_emoji_popover {
  padding: 0;

  .symbol {
    .emoji_list {
      span {
        display: inline-flex;
        width: 25px;
        height: 25px;
        justify-content: center;
        align-items: center;
        cursor: pointer;

        &:hover {
          background-color: var(--item_hover);
        }
      }
    }
  }

  .classical {
    .classical_emoji_list {
      i {
        display: inline-flex;
        width: 40px;
        height: 40px;
        font-size: 25px;
        justify-content: center;
        align-items: center;
        cursor: pointer;

        &:hover {
          background-color: var(--item_hover);
        }
      }
    }
  }

  .emoji_pack {
    .pack_emoji_list {
      padding: 20px 10px 10px 10px;
      span {
        display: inline-flex;
        width: 70px;
        height: 70px;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        transition: all .3s;

        &:hover {
          background-color: var(--item_hover);
          transform: scale(1.3);
          z-index: 1;
        }

        img {
          width: 68px;
          height: 68px;
          object-fit: cover;
        }
      }
    }
  }

  .el-tabs__header.is-bottom {
    margin-bottom: 0;
    margin-top: 0;
  }
}
</style>